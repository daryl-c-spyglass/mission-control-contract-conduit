<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{fullAddress}} - Property Flyer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Arial, sans-serif;
            background: white;
            -webkit-print-color-adjust: exact;
            print-color-adjust: exact;
        }
        
        .page {
            width: 2550px;
            height: 3300px;
            margin: 0 auto;
            position: relative;
            background: white;
            overflow: hidden;
        }
        
        /* Print-specific - page fills the print area, Puppeteer's page.pdf() handles scaling */
        @media print {
            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            .page {
                /* Content is at 2550x3300, Puppeteer page.pdf() scales to 8.5x11 */
                width: 2550px;
                height: 3300px;
                margin: 0;
            }
        }
        
        /* Header - matches FlyerPreview: left-6 (24px), top-4 (16px), right-6 (24px), h-[80px] (80px) */
        /* Accent Bar - positioned from canvas at left 48px, top 25px */
        /* left: 48px * 3.125 = 150px, top: 25px * 3.125 = 78px */
        /* 6px * 3.125 = 19px wide, 83px * 3.125 = 259px tall */
        .accent-bar {
            position: absolute;
            left: 150px;
            top: 78px;
            width: 19px;
            height: 259px;
            background-color: #8b7d6b;
        }
        
        /* Header with logos - centered with accent bar center */
        /* left: 70px * 3.125 = 219px (aligned with address), top: 42px * 3.125 = 131px */
        /* height: 50px * 3.125 = 156px */
        .header {
            position: absolute;
            left: 219px;
            top: 131px;
            right: 75px;
            height: 156px;
            display: flex;
            align-items: center;
            overflow: visible;
        }
        
        /* Logo Container - gap-based equal spacing */
        .logo-container {
            display: flex;
            align-items: center;
            height: 100%;
            max-width: 100%;
            overflow: hidden;
            gap: {{logoGap}}px;
        }
        
        /* Primary Logo Section */
        .logo-primary-section {
            display: flex;
            align-items: center;
            justify-content: center;
            height: 100%;
            flex-shrink: 0;
        }
        
        /* max-h-[50px] -> 50*3.125 = 156px */
        .logo-image {
            max-height: 156px;
            object-fit: contain;
        }
        
        /* Divider - 1px * 3.125 = 3px wide, 50px * 3.125 = 156px tall */
        .logo-divider {
            width: 3px;
            height: 156px;
            background-color: #4a4a4a;
            flex-shrink: 0;
        }
        
        /* Secondary Logo Container - translateY applied here */
        .logo-secondary-section {
            display: flex;
            align-items: center;
            justify-content: flex-start;
            height: 100%;
            flex-shrink: 0;
        }
        
        /* max-h-[50px] -> 50*3.125 = 156px */
        .secondary-logo-image {
            max-height: 156px;
            object-fit: contain;
        }
        
        /* Price Badge - 144px * 3.125 = 450px wide, 58px * 3.125 = 181px tall */
        /* Positioned relative to canvas top, not header */
        .price-badge {
            position: absolute;
            right: 78px;
            top: -13px;
            width: 450px;
            height: 181px;
            background-color: #867d71;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: white;
        }
        
        /* text-[7pt] -> 7pt = 9.33px -> 9.33*3.125 = 29px, tracking-[2px] -> 6.25px */
        .price-label {
            font-size: 29px;
            letter-spacing: 6px;
            text-transform: uppercase;
        }
        
        /* text-[14pt] -> 14pt = 18.67px -> 18.67*3.125 = 58px */
        .price-amount {
            font-size: 58px;
            font-weight: bold;
        }
        
        /* Address Line - left: 70px * 3.125 = 219px, top: 114px * 3.125 = 356px */
        /* text-[11pt] -> 11pt = 14.67px -> 14.67*3.125 = 46px, tracking-[2px] -> 6.25px */
        .address-line {
            position: absolute;
            left: 219px;
            top: 356px;
            right: 75px;
            font-size: 46px;
            color: #4a4a4a;
            letter-spacing: 6px;
            text-transform: uppercase;
            font-weight: 500;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        
        /* Main Image - Exact coordinates from reference project (scaled 3.125x) */
        /* Preview: x: 48, y: 156, w: 720, h: 360 */
        /* PDF: 48*3.125=150, 156*3.125=488, 720*3.125=2250, 360*3.125=1125 */
        .main-image-container {
            position: absolute;
            left: 150px;
            top: 488px;
            width: 2250px;
            height: 1125px;
            border-radius: 25px;
            overflow: hidden;
            background: #e5e7eb;
        }
        
        .main-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Secondary Images Row - Exact coordinates from reference (scaled 3.125x) */
        /* Preview: x: 48, y: 530, w: 720, gap: 10 */
        /* PDF: 48*3.125=150, 530*3.125=1656, 720*3.125=2250, 10*3.125=31 */
        .secondary-images {
            position: absolute;
            left: 150px;
            top: 1656px;
            width: 2250px;
            display: flex;
            gap: 31px;
        }
        
        /* Secondary Image - Preview: 355x230, PDF: 355*3.125=1109, 230*3.125=719 */
        .secondary-image-container {
            width: 1109px;
            height: 719px;
            border-radius: 25px;
            overflow: hidden;
            background: #e5e7eb;
        }
        
        .secondary-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Footer Section - Reference: y: 790, h: 270 */
        /* Preview: x: 48, y: 790, w: 720, h: 270, grid: 180px x 4 */
        /* PDF: 790*3.125=2469, 270*3.125=844 */
        /* Preview description is 270px wide (1.5 cols), so use position-based layout */
        .footer-section {
            position: absolute;
            left: 150px;
            top: 2469px;
            width: 2250px;
            height: 844px;
            overflow: hidden;
        }
        
        /* Grid 13: Property Stats — preview: col 0, width 180px */
        /* Position: left 0, width 562px (180*3.125) */
        .property-details {
            position: absolute;
            left: 0;
            top: 0;
            width: 562px;
            height: 100%;
            padding-top: 163px;
            padding-left: 56px;
            padding-right: 25px;
        }
        
        /* Preview: 11pt text, 24px icons, gap 2 (8px) */
        /* 11pt*3.125=34.4pt≈46px, 24*3.125=75px icons, gap 6px*3.125=19px */
        .detail-item {
            display: flex;
            align-items: center;
            gap: 19px;
            font-size: 46px;
            color: #4a4a4a;
            white-space: nowrap;
        }
        
        /* Preview: marginBottom 33px → 33*3.125=103px */
        .detail-item-spaced {
            margin-bottom: 103px;
        }
        
        .detail-icon {
            width: 75px;
            height: 75px;
            flex-shrink: 0;
        }
        
        .detail-icon svg {
            width: 100%;
            height: 100%;
        }
        
        /* Accent divider 1 — preview: top 40px, height 160px, right 7px */
        /* 40*3.125=125, 160*3.125=500, 7*3.125=22 */
        .accent-divider {
            position: absolute;
            right: 22px;
            top: 125px;
            width: 6px;
            height: 500px;
            background-color: #8b7d6b;
        }
        
        /* Grid 14: Description — preview: col 1, width 270px (1.5 cols), paddingLeft 29, paddingRight 10 */
        /* Position: left 562px, width 844px (270*3.125), padding 91/31 */
        .description-section {
            position: absolute;
            left: 562px;
            top: 0;
            width: 844px;
            height: 100%;
            padding-left: 91px;
            padding-right: 31px;
            overflow: hidden;
        }
        
        /* Headline — preview: fontSize 11.5pt, marginTop 4px, marginBottom 8px */
        /* 11.5pt*3.125=36pt≈48px, 4*3.125=13, 8*3.125=25 */
        .listing-headline {
            font-size: 48px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 3px;
            line-height: 1.3;
            margin-top: 13px;
            margin-bottom: 25px;
            color: #4a4a4a;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }
        
        /* Preview: fontSize 10.35pt → 10.35*3.125=32.3pt≈43px */
        /* Reduced to 40px and 7 lines to prevent bottom overflow in PDF export */
        /* Hard max-height: 7 lines × 40px × 1.35 = 378px */
        .description-text {
            font-size: 40px;
            line-height: 1.35;
            color: #4a4a4a;
            display: -webkit-box;
            -webkit-line-clamp: 7;
            -webkit-box-orient: vertical;
            overflow: hidden;
            max-height: 378px;
        }
        
        /* Accent divider 2 — preview: left 472px from bottom-section */
        /* 472*3.125=1475px from footer left edge */
        .accent-divider-2 {
            position: absolute;
            left: 1475px;
            top: 125px;
            width: 6px;
            height: 500px;
            background-color: #8b7d6b;
            z-index: 5;
        }
        
        /* Grid 15: Agent Photo — preview: col 2, paddingTop 14px */
        /* Position: left 1125px (562*2), width 562px */
        /* Photo: 113px circle at right: -79px from col edge */
        .agent-section {
            position: absolute;
            left: 1125px;
            top: 0;
            width: 562px;
            height: 100%;
            padding-top: 44px;
        }
        
        /* Agent photo positioned to overlap between cols 3 and 4 */
        /* Preview: right -79px means it extends into col 4 */
        .agent-photo {
            position: absolute;
            width: 353px;
            height: 353px;
            border-radius: 50%;
            overflow: hidden;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            right: -247px;
            top: 44px;
        }
        
        .agent-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Grid 16: QR + Agent info — preview: col 3, paddingTop 28px */
        /* Position: left 1687px (562*3), width 563px */
        .qr-section {
            position: absolute;
            left: 1687px;
            top: 0;
            width: 563px;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding-top: 88px;
            overflow: hidden;
        }
        
        .qr-code {
            width: 238px;
            height: 238px;
            border: 6px solid black;
            padding: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-left: 256px;
        }
        
        .qr-code img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }
        
        /* Agent info — preview: marginTop 31px, gap 2.5px, marginLeft -10px */
        /* 31*3.125=97, 2.5*3.125=8, -10*3.125=-31 */
        /* fontSize: 13.9pt → 13.9*3.125=43.4pt≈58px */
        .agent-name {
            font-size: 58px;
            font-weight: bold;
            text-align: center;
            color: #4a4a4a;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            margin-top: 97px;
            margin-left: -31px;
        }
        
        /* Preview: fontSize 10.1pt → 10.1*3.125=31.6pt≈42px */
        .agent-info {
            font-size: 42px;
            text-align: center;
            line-height: 1.4;
            color: #4a4a4a;
            margin-left: -31px;
        }
        
        .photo-placeholder {
            width: 100%;
            height: 100%;
            background: #e5e7eb;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #9ca3af;
            font-size: 48px;
        }
        
        /* PDF page break handling - only used when printing/exporting PDF */
        @media print {
            .page {
                page-break-after: always;
            }
        }
        
        /* Screen media - ensure page fills viewport for PNG screenshot */
        @media screen {
            html, body {
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
        }
    </style>
</head>
<body>
    <div class="page">
        <!-- Accent Bar - positioned from canvas -->
        <div class="accent-bar"></div>
        
        <!-- Header with Logos -->
        <div class="header">
            <!-- Logo Container -->
            <div class="logo-container">
                <!-- Primary Logo -->
                <div class="logo-primary-section">
                    {{#if logoUrl}}
                    <img src="{{logoUrl}}" alt="Company Logo" class="logo-image" style="transform: scale({{primaryLogoScale}}); transform-origin: center center;" />
                    {{else}}
                    <span style="color: #9ca3af; font-size: 36px;">LOGO</span>
                    {{/if}}
                </div>
                
                <!-- Divider -->
                <div class="logo-divider"></div>
                
                <!-- Secondary Logo - transform on container, scale on image (matches preview) -->
                <div class="logo-secondary-section" style="transform: translateY({{secondaryLogoOffsetY}}px);">
                    {{#if secondaryLogoUrl}}
                    <img src="{{secondaryLogoUrl}}" alt="Partner Logo" class="secondary-logo-image" style="transform: scale({{secondaryLogoScale}}); transform-origin: left center;" />
                    {{else}}
                    <span style="color: #9ca3af; font-size: 36px;">SECONDARY LOGO</span>
                    {{/if}}
                </div>
            </div>
            
            <!-- Price Badge -->
            <div class="price-badge">
                <span class="price-label">LISTED AT</span>
                <span class="price-amount">{{price}}</span>
            </div>
        </div>
        
        <!-- Address Line -->
        <div class="address-line">{{fullAddress}}</div>
        
        <!-- Main Image -->
        <div class="main-image-container">
            {{#if mainImage}}
            <img src="{{mainImage}}" alt="Property Main View" class="main-image" style="{{{mainImageStyle}}}" />
            {{else}}
            <div class="photo-placeholder">Main Property Photo</div>
            {{/if}}
        </div>
        
        <!-- Secondary Images -->
        <div class="secondary-images">
            <div class="secondary-image-container">
                {{#if secondaryImage1}}
                <img src="{{secondaryImage1}}" alt="Kitchen" class="secondary-image" style="{{{kitchenImageStyle}}}" />
                {{else}}
                <div class="photo-placeholder">Kitchen Photo</div>
                {{/if}}
            </div>
            <div class="secondary-image-container">
                {{#if secondaryImage2}}
                <img src="{{secondaryImage2}}" alt="Room" class="secondary-image" style="{{{roomImageStyle}}}" />
                {{else}}
                <div class="photo-placeholder">Room Photo</div>
                {{/if}}
            </div>
        </div>
        
        <!-- Footer Section -->
        <div class="footer-section">
            <!-- Property Details - Grid 13 -->
            <div class="property-details">
                <div class="detail-item detail-item-spaced">
                    <div class="detail-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#4a4a4a" stroke-width="1.5">
                            <path d="M2 4v16"/><path d="M2 8h18a2 2 0 0 1 2 2v10"/><path d="M2 17h20"/><path d="M6 8v9"/>
                        </svg>
                    </div>
                    <span>{{bedrooms}} bedrooms</span>
                </div>
                <div class="detail-item detail-item-spaced">
                    <div class="detail-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#4a4a4a" stroke-width="1.5">
                            <path d="M9 6 6.5 3.5a1.5 1.5 0 0 0-1-.5C4.683 3 4 3.683 4 4.5V17a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5"/>
                            <line x1="10" x2="8" y1="5" y2="7"/><line x1="2" x2="22" y1="12" y2="12"/>
                        </svg>
                    </div>
                    <span>{{bathrooms}} bathrooms</span>
                </div>
                <div class="detail-item">
                    <div class="detail-icon">
                        <svg viewBox="0 0 24 24" fill="none" stroke="#4a4a4a" stroke-width="1.5">
                            <path d="M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z"/>
                        </svg>
                    </div>
                    <span>{{sqft}} sq. ft</span>
                </div>
                <!-- Accent divider on right edge of grid 13 -->
                <div class="accent-divider"></div>
            </div>
            
            <!-- Grid 14: Description Section -->
            <div class="description-section">
                <h3 class="listing-headline">{{headline}}</h3>
                <p class="description-text">{{description}}</p>
            </div>
            <!-- Accent divider 2: positioned in footer, between description and agent photo -->
            <div class="accent-divider-2"></div>
            
            <!-- Grid 15: Agent Photo only (centered) -->
            <div class="agent-section">
                <div class="agent-photo">
                    {{#if agentPhoto}}
                    <img src="{{agentPhoto}}" alt="{{agentName}}" style="{{{agentPhotoStyle}}}" />
                    {{else}}
                    <svg viewBox="0 0 24 24" fill="#9ca3af" width="180" height="180">
                        <circle cx="12" cy="8" r="4"/>
                        <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
                    </svg>
                    {{/if}}
                </div>
            </div>
            
            <!-- Grid 16: QR Code + Agent Name/Title/Phone -->
            <div class="qr-section">
                {{#if qrCodeUrl}}
                <div class="qr-code">
                    <img src="{{qrCodeUrl}}" alt="QR Code" />
                </div>
                {{/if}}
                <div class="agent-name">{{agentName}}</div>
                <div class="agent-info">
                    <div>{{agentTitle}}</div>
                    <div>{{agentPhone}}</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
