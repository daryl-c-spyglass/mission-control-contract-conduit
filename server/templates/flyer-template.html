<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <link href="https://fonts.googleapis.com/css2?family=League+Spartan:wght@400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    /* PIXEL-IDENTICAL TEMPLATE - Fixed zone heights with explicit math */
    @page { size: 8.5in 11in; margin: 0; }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    :root {
      /* 8.5x11 at 300 DPI = 2550x3300 */
      --W: 2550px;
      --H: 3300px;
      
      /* FIXED ZONE HEIGHTS (explicit math) */
      --headerH: 165px;
      --addressH: 99px;
      --photosH: 1485px;
      /* Bottom = H - headerH - addressH - photosH (future-proof calc) */
      --bottomH: calc(var(--H) - var(--headerH) - var(--addressH) - var(--photosH));
      
      --padX: 80px;
      --gap: 36px;
      --ink: #1f1f1f;
      --muted: #6b6b6b;
      --rule: #e6e6e6;
      --badge: #8b7355;
      
      /* Separator tokens (visible at 300 DPI) */
      --sepColor: rgba(0,0,0,0.16);
      --sepW: 2px;
      
      /* Left brand bar */
      --brandBar: #c7b28a;
      --brandBarW: 10px;
    }
    
    html, body {
      margin: 0;
      padding: 0;
      width: var(--W);
      height: var(--H);
      overflow: hidden;
      background: #fff;
    }
    
    body {
      font-family: 'Montserrat', sans-serif;
      color: var(--ink);
      -webkit-font-smoothing: antialiased;
    }
    
    .flyer {
      width: var(--W);
      height: var(--H);
      display: flex;
      flex-direction: column;
      overflow: hidden;
      background: #fff;
      position: relative;
    }
    
    /* Left vertical brand bar (Rechat-style) */
    .flyer::before {
      content: "";
      position: absolute;
      left: 0;
      top: 0;
      height: 260px;
      width: var(--brandBarW);
      background: var(--brandBar);
      z-index: 5;
    }
    
    /* HEADER - FIXED 165px */
    .header {
      height: var(--headerH);
      padding: 40px var(--padX) 0;
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }
    
    .header-logo {
      height: 100px;
      width: auto;
    }
    
    .price-badge {
      background: var(--badge);
      color: #fff;
      padding: 22px 34px 22px 44px;
      border-radius: 0;
      text-align: right;
      min-width: 360px;
      position: relative;
      /* tag shape with angled left notch */
      clip-path: polygon(
        14% 0%,
        100% 0%,
        100% 100%,
        14% 100%,
        0% 50%
      );
      box-shadow: 0 4px 0 rgba(0,0,0,0.06);
    }
    
    .price-label {
      font-size: 24px;
      letter-spacing: 4px;
      font-weight: 700;
      text-transform: uppercase;
      opacity: 0.95;
    }
    
    .price-value {
      font-size: 56px;
      font-weight: 900;
      letter-spacing: 1px;
      margin-top: 8px;
      line-height: 1;
    }
    
    /* ADDRESS - FIXED 99px */
    .address-bar {
      height: var(--addressH);
      padding: 0 var(--padX);
      display: flex;
      align-items: center;
      font-size: 32px;
      letter-spacing: 2px;
      font-weight: 400;
      text-transform: uppercase;
      border-bottom: var(--sepW) solid var(--sepColor);
    }
    
    /* PHOTOS - FIXED 1485px */
    .photos-section {
      height: var(--photosH);
      padding: 0 var(--padX);
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    
    .main-photo-container {
      flex: 1 1 auto;
      overflow: hidden;
      background: #f2f2f2;
    }
    
    .main-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    .secondary-photos {
      height: 380px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      overflow: hidden;
    }
    
    .secondary-photo-container {
      overflow: hidden;
      background: #f2f2f2;
    }
    
    .secondary-photo {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    
    .photo-placeholder {
      width: 100%;
      height: 100%;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #999;
      font-size: 32px;
    }
    
    /* BOTTOM SECTION - FIXED (fills remainder) */
    .bottom-section {
      height: var(--bottomH);
      padding: 48px var(--padX) 70px;
      display: flex;
      align-items: flex-start;
    }
    
    /* Content band controls where content sits - dividers only span this height */
    .bottom-band {
      width: 100%;
      display: grid;
      /* structural dividers as columns */
      grid-template-columns: 480px 4px 1fr 4px 520px;
      gap: 0;
      /* band height so dividers don't run through huge whitespace */
      height: 460px;
      max-height: 460px;
      align-items: stretch;
    }
    
    /* Structural vertical divider (PSD-matching: subtle gray) */
    .v-divider {
      width: 4px;
      background: rgba(0,0,0,0.28);
    }
    
    /* LEFT COLUMN - Stats (anchor to top) */
    .stats-column {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      gap: 50px;
      padding-right: 36px;
    }
    
    .stat-item {
      display: flex;
      align-items: center;
      gap: 30px;
    }
    
    .stat-icon {
      width: 80px;
      height: 80px;
      flex-shrink: 0;
    }
    
    .stat-icon svg {
      width: 80px;
      height: 80px;
    }
    
    .stat-text {
      font-size: 68px;
      font-weight: 900;
      line-height: 1.05;
    }
    
    .stat-text small {
      font-size: 52px;
      font-weight: 800;
    }
    
    /* CENTER COLUMN - Description (anchor to top) */
    .description-column {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      padding: 0 36px;
    }
    
    .listing-headline {
      font-family: 'League Spartan', sans-serif;
      font-size: 66px;
      font-weight: 900;
      letter-spacing: 5px;
      text-transform: uppercase;
      text-align: center;
      line-height: 1.1;
      margin: 0 0 50px;
      white-space: pre-line;
    }
    
    .listing-description {
      font-size: 42px;
      line-height: 1.55;
      color: #3b3b3b;
      margin: 0 auto;
      max-width: 880px;
      text-align: left;
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 6;
      overflow: hidden;
    }
    
    /* RIGHT COLUMN - Agent (aligned within band, not page bottom) */
    .agent-column {
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: center;
      gap: 24px;
      text-align: center;
      padding-left: 36px;
      padding-top: 90px;
    }
    
    .agent-photo {
      width: 240px;
      height: 240px;
      border-radius: 50%;
      object-fit: cover;
      border: 7px solid #c7b28a;
      background: #f2f2f2;
    }
    
    .agent-photo-placeholder {
      width: 240px;
      height: 240px;
      border-radius: 50%;
      background: #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
      border: 7px solid #c7b28a;
    }
    
    .agent-photo-placeholder svg {
      width: 120px;
      height: 120px;
      fill: #999;
    }
    
    .agent-name {
      font-size: 58px;
      font-weight: 900;
      line-height: 1.1;
      margin-top: 10px;
    }
    
    .agent-title {
      font-size: 30px;
      letter-spacing: 5px;
      color: var(--muted);
      margin-top: 8px;
      text-transform: uppercase;
    }
    
    .agent-phone {
      font-size: 42px;
      font-weight: 800;
      margin-top: 14px;
    }
    
    .agent-logo {
      width: 260px;
      height: auto;
      margin-top: 24px;
      opacity: 0.95;
    }
  </style>
</head>
<body>
  <div class="flyer">
  <!-- HEADER - Logo left, Price right -->
  <div class="header">
    <img src="{{spyglassLogoUrl}}" class="header-logo" alt="Spyglass Realty">
    
    <div class="price-badge">
      <div class="price-label">{{statusLabel}}</div>
      <div class="price-value">{{price}}</div>
    </div>
  </div>
  
  <!-- ADDRESS BAR -->
  <div class="address-bar">{{address}}</div>
  
  <!-- PHOTOS -->
  <div class="photos-section">
    <div class="main-photo-container">
      {{#if mainPhoto}}
      <img src="{{mainPhoto}}" class="main-photo" alt="Property">
      {{else}}
      <div class="photo-placeholder">Main Photo</div>
      {{/if}}
    </div>
    
    <div class="secondary-photos">
      <div class="secondary-photo-container">
        {{#if photo2}}
        <img src="{{photo2}}" class="secondary-photo" alt="Property">
        {{else}}
        <div class="photo-placeholder">Photo 2</div>
        {{/if}}
      </div>
      <div class="secondary-photo-container">
        {{#if photo3}}
        <img src="{{photo3}}" class="secondary-photo" alt="Property">
        {{else}}
        <div class="photo-placeholder">Photo 3</div>
        {{/if}}
      </div>
    </div>
  </div>
  
  <!-- BOTTOM SECTION -->
  <div class="bottom-section">
    <div class="bottom-band">
      <!-- Stats Column -->
      <div class="stats-column">
        <div class="stat-text">{{beds}} <small>bedrooms</small></div>
        <div class="stat-text">{{baths}} <small>bathrooms</small></div>
        <div class="stat-text">{{sqft}} <small>sq. ft</small></div>
      </div>
      
      <!-- Divider -->
      <div class="v-divider"></div>
      
      <!-- Description Column -->
      <div class="description-column">
        {{#if headline}}
        <div class="listing-headline">{{headline}}</div>
        {{/if}}
        <div class="listing-description">{{description}}</div>
      </div>
      
      <!-- Divider -->
      <div class="v-divider"></div>
      
      <!-- Agent Column -->
      <div class="agent-column">
        {{#if agentPhoto}}
        <img src="{{agentPhoto}}" class="agent-photo" alt="{{agentName}}">
        {{else}}
        <div class="agent-photo-placeholder">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="8" r="4"/>
            <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
          </svg>
        </div>
        {{/if}}
        
        <div class="agent-name">{{agentName}}</div>
        <div class="agent-title">{{agentTitle}}</div>
        <div class="agent-phone">{{agentPhone}}</div>
        
        <img src="{{spyglassLogoUrl}}" class="agent-logo" alt="Spyglass Realty">
      </div>
    </div>
  </div>
  </div>
</body>
</html>
