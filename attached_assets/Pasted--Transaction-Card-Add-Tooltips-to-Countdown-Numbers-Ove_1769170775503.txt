# Transaction Card - Add Tooltips to Countdown Numbers

## Overview
Add hover tooltips to the countdown numbers on transaction cards so users understand what each number represents.

---

## Tooltip Messages by Status

| Status | Countdown Shows | Tooltip Message |
|--------|-----------------|-----------------|
| **Off Market** | "7 days" | "Days until listing goes live on MLS" |
| **Off Market** (past) | "3 days ago" | "Days since expected go-live date" |
| **Active Listing** | "29 days" | "Days on market since listing" |
| **In Contract** | "4 days remaining" | "Days until expected closing" |
| **Pending** | "X days remaining" | "Days until expected closing" |
| **Pending** (overdue) | "2 days overdue" | "Days past expected closing date" |
| **Closing Soon** | "X days remaining" | "Days until closing" |
| **Closed** | "46 days ago" | "Days since transaction closed" |

---

## Implementation

### Step 1: Create Simple Tooltip Component (No Dependencies)

```tsx
// client/src/components/ui/SimpleTooltip.tsx

import { ReactNode, useState } from "react";

interface SimpleTooltipProps {
  children: ReactNode;
  content: string;
  position?: "top" | "bottom" | "left" | "right";
}

export function SimpleTooltip({ 
  children, 
  content, 
  position = "left" 
}: SimpleTooltipProps) {
  const [isVisible, setIsVisible] = useState(false);

  const positionClasses = {
    top: "bottom-full left-1/2 -translate-x-1/2 mb-2",
    bottom: "top-full left-1/2 -translate-x-1/2 mt-2",
    left: "right-full top-1/2 -translate-y-1/2 mr-2",
    right: "left-full top-1/2 -translate-y-1/2 ml-2",
  };

  const arrowPositionClasses = {
    top: "top-full left-1/2 -translate-x-1/2 border-l-transparent border-r-transparent border-b-transparent border-t-gray-900",
    bottom: "bottom-full left-1/2 -translate-x-1/2 border-l-transparent border-r-transparent border-t-transparent border-b-gray-900",
    left: "left-full top-1/2 -translate-y-1/2 border-t-transparent border-b-transparent border-r-transparent border-l-gray-900",
    right: "right-full top-1/2 -translate-y-1/2 border-t-transparent border-b-transparent border-l-transparent border-r-gray-900",
  };

  return (
    <div 
      className="relative inline-flex"
      onMouseEnter={() => setIsVisible(true)}
      onMouseLeave={() => setIsVisible(false)}
    >
      {children}
      
      {isVisible && (
        <div 
          className={`
            absolute z-50 px-3 py-2 text-xs font-medium text-white 
            bg-gray-900 rounded-lg shadow-lg whitespace-nowrap
            transition-opacity duration-150
            ${positionClasses[position]}
          `}
          role="tooltip"
        >
          {content}
          {/* Arrow */}
          <div 
            className={`
              absolute w-0 h-0 border-4
              ${arrowPositionClasses[position]}
            `}
          />
        </div>
      )}
    </div>
  );
}
```

---

### Step 2: Update Date Box Components

#### Off Market Date Box with Tooltip

```tsx
// In client/src/components/transactions/TransactionCard.tsx

import { SimpleTooltip } from "@/components/ui/SimpleTooltip";

function OffMarketDateBox({ goLiveDate }: { goLiveDate: string | null }) {
  const days = calculateDaysDifference(goLiveDate);
  const formattedDate = formatDate(goLiveDate);
  const isPastDate = isDatePast(goLiveDate);
  const isTodayDate = isDateToday(goLiveDate);

  // Determine tooltip message based on state
  const getTooltipMessage = () => {
    if (isPastDate) return "Days since expected go-live date";
    if (isTodayDate) return "Listing goes live on MLS today";
    return "Days until listing goes live on MLS";
  };

  return (
    <div className="bg-purple-50 border border-purple-200 rounded-lg p-3 mb-4">
      <div className="flex items-center justify-between">
        <div>
          <p className="text-xs text-purple-600 uppercase tracking-wide font-medium flex items-center gap-1.5">
            <Clock className="w-3.5 h-3.5" />
            Going Live
          </p>
          {formattedDate ? (
            <p className="text-base text-purple-900 font-semibold mt-1">{formattedDate}</p>
          ) : (
            <p className="text-sm text-purple-400 mt-1">Not set</p>
          )}
        </div>
        
        {/* Countdown with Tooltip */}
        {days !== null && (
          <SimpleTooltip content={getTooltipMessage()} position="left">
            <div className="text-right cursor-help">
              {isPastDate ? (
                <>
                  <p className="text-2xl font-bold text-purple-400">{Math.abs(days)}</p>
                  <p className="text-xs text-purple-400">days ago</p>
                </>
              ) : isTodayDate ? (
                <div className="bg-purple-500 text-white px-3 py-1 rounded-lg">
                  <p className="text-sm font-bold">Today</p>
                </div>
              ) : (
                <>
                  <p className="text-2xl font-bold text-purple-600">{days}</p>
                  <p className="text-xs text-purple-500">{days === 1 ? "day" : "days"}</p>
                </>
              )}
            </div>
          </SimpleTooltip>
        )}
      </div>
    </div>
  );
}
```

#### Active Listing Date Box with Tooltip

```tsx
function ActiveListingDateBox({ listDate }: { listDate: string | null }) {
  const days = listDate ? Math.abs(calculateDaysDifference(listDate) || 0) : null;
  const formattedDate = formatDate(listDate);

  return (
    <div className="bg-green-50 border border-green-200 rounded-lg p-3 mb-4">
      <div className="flex items-center justify-between">
        <div>
          <p className="text-xs text-green-600 uppercase tracking-wide font-medium flex items-center gap-1.5">
            <Calendar className="w-3.5 h-3.5" />
            Days on Market
          </p>
          {formattedDate ? (
            <p className="text-base text-green-900 font-semibold mt-1">Listed {formattedDate}</p>
          ) : (
            <p className="text-sm text-green-400 mt-1">List date not set</p>
          )}
        </div>
        
        {/* Countdown with Tooltip */}
        {days !== null && (
          <SimpleTooltip content="Days on market since listing" position="left">
            <div className="text-right cursor-help">
              <p className="text-2xl font-bold text-green-600">{days}</p>
              <p className="text-xs text-green-500">{days === 1 ? "day" : "days"}</p>
            </div>
          </SimpleTooltip>
        )}
      </div>
    </div>
  );
}
```

#### In Contract Date Box with Tooltip

```tsx
function InContractDateBox({ 
  contractDate, 
  closingDate 
}: { 
  contractDate: string | null; 
  closingDate: string | null;
}) {
  const daysToClose = calculateDaysDifference(closingDate);
  const isOverdue = daysToClose !== null && daysToClose < 0;
  const isClosingToday = isDateToday(closingDate);

  // Determine tooltip message
  const getTooltipMessage = () => {
    if (isClosingToday) return "Closing is scheduled for today";
    if (isOverdue) return "Days past expected closing date";
    return "Days until expected closing";
  };

  return (
    <div className="bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4">
      <div className="grid grid-cols-2 gap-3">
        <div>
          <p className="text-xs text-orange-600 uppercase tracking-wide font-medium">Contract Date</p>
          <p className="text-sm text-orange-900 font-semibold mt-1">
            {formatDate(contractDate) || "â€”"}
          </p>
        </div>
        <div>
          <p className="text-xs text-orange-600 uppercase tracking-wide font-medium">Closing Date</p>
          <p className="text-sm text-orange-900 font-semibold mt-1">
            {formatDate(closingDate) || "â€”"}
          </p>
        </div>
      </div>
      
      {/* Bottom row with Tooltip */}
      {closingDate && daysToClose !== null && (
        <div className="mt-2 pt-2 border-t border-orange-200 flex items-center justify-between">
          <span className="text-xs text-orange-600 font-medium">Time to Close</span>
          <SimpleTooltip content={getTooltipMessage()} position="left">
            <span className={`text-sm font-bold cursor-help ${
              isOverdue ? "text-red-600" : "text-orange-700"
            }`}>
              {isClosingToday 
                ? "Closing Today!" 
                : isOverdue 
                  ? `${Math.abs(daysToClose)} ${Math.abs(daysToClose) === 1 ? "day" : "days"} overdue`
                  : `${daysToClose} ${daysToClose === 1 ? "day" : "days"} remaining`
              }
            </span>
          </SimpleTooltip>
        </div>
      )}
    </div>
  );
}
```

#### Pending Date Box with Tooltip

```tsx
function PendingDateBox({ 
  contractDate, 
  closingDate 
}: { 
  contractDate: string | null; 
  closingDate: string | null;
}) {
  const daysToClose = calculateDaysDifference(closingDate);
  const isOverdue = daysToClose !== null && daysToClose < 0;
  const isClosingToday = isDateToday(closingDate);

  // Theme colors based on overdue status
  const boxBg = isOverdue ? "bg-red-50" : "bg-yellow-50";
  const boxBorder = isOverdue ? "border-red-200" : "border-yellow-200";
  const textColor = isOverdue ? "text-red-600" : "text-yellow-600";
  const textColorDark = isOverdue ? "text-red-900" : "text-yellow-900";
  const borderColor = isOverdue ? "border-red-200" : "border-yellow-200";

  // Tooltip message
  const getTooltipMessage = () => {
    if (isClosingToday) return "Closing is scheduled for today";
    if (isOverdue) return "Days past expected closing date - action may be required";
    return "Days until expected closing";
  };

  return (
    <div className={`${boxBg} border ${boxBorder} rounded-lg p-3 mb-4`}>
      <div className="grid grid-cols-2 gap-3">
        <div>
          <p className={`text-xs ${textColor} uppercase tracking-wide font-medium`}>Contract Date</p>
          <p className={`text-sm ${textColorDark} font-semibold mt-1`}>
            {formatDate(contractDate) || "â€”"}
          </p>
        </div>
        <div>
          <p className={`text-xs ${textColor} uppercase tracking-wide font-medium`}>Closing Date</p>
          <p className={`text-sm ${textColorDark} font-semibold mt-1`}>
            {formatDate(closingDate) || "â€”"}
          </p>
        </div>
      </div>
      
      {/* Bottom row with Tooltip */}
      {closingDate && daysToClose !== null && (
        <div className={`mt-2 pt-2 border-t ${borderColor} flex items-center justify-between`}>
          {isOverdue ? (
            <>
              <span className="text-xs text-red-600 font-medium flex items-center gap-1">
                <AlertTriangle className="w-3.5 h-3.5" />
                Overdue
              </span>
              <SimpleTooltip content={getTooltipMessage()} position="left">
                <span className="text-sm text-red-700 font-bold cursor-help">
                  {Math.abs(daysToClose)} {Math.abs(daysToClose) === 1 ? "day" : "days"} overdue
                </span>
              </SimpleTooltip>
            </>
          ) : isClosingToday ? (
            <>
              <span className={`text-xs ${textColor} font-medium`}>Status</span>
              <SimpleTooltip content={getTooltipMessage()} position="left">
                <span className="text-sm text-yellow-700 font-bold cursor-help">Closing Today!</span>
              </SimpleTooltip>
            </>
          ) : (
            <>
              <span className={`text-xs ${textColor} font-medium`}>Time to Close</span>
              <SimpleTooltip content={getTooltipMessage()} position="left">
                <span className="text-sm text-yellow-700 font-bold cursor-help">
                  {daysToClose} {daysToClose === 1 ? "day" : "days"} remaining
                </span>
              </SimpleTooltip>
            </>
          )}
        </div>
      )}
    </div>
  );
}
```

#### Closed Date Box with Tooltip

```tsx
function ClosedDateBox({ 
  contractDate, 
  closedDate 
}: { 
  contractDate: string | null; 
  closedDate: string | null;
}) {
  const daysSinceClosed = closedDate ? Math.abs(calculateDaysDifference(closedDate) || 0) : null;

  return (
    <div className="bg-gray-100 border border-gray-200 rounded-lg p-3 mb-4">
      <div className="grid grid-cols-2 gap-3">
        <div>
          <p className="text-xs text-gray-500 uppercase tracking-wide font-medium">Contract Date</p>
          <p className="text-sm text-gray-700 font-semibold mt-1">
            {formatDate(contractDate) || "â€”"}
          </p>
        </div>
        <div>
          <p className="text-xs text-gray-500 uppercase tracking-wide font-medium">Closed On</p>
          <p className="text-sm text-gray-700 font-semibold mt-1">
            {formatDate(closedDate) || "â€”"}
          </p>
        </div>
      </div>
      
      {/* Bottom row with Tooltip */}
      <div className="mt-2 pt-2 border-t border-gray-200 flex items-center justify-between">
        <span className="text-xs text-gray-500 font-medium flex items-center gap-1">
          <CheckCircle className="w-3.5 h-3.5" />
          Completed
        </span>
        {daysSinceClosed !== null && (
          <SimpleTooltip content="Days since transaction closed" position="left">
            <span className="text-sm text-gray-600 font-medium cursor-help">
              {daysSinceClosed} {daysSinceClosed === 1 ? "day" : "days"} ago
            </span>
          </SimpleTooltip>
        )}
      </div>
    </div>
  );
}
```

---

## Visual Example

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  612 Twelve Oaks LN                    [Off Market] â”‚
â”‚  (Off Market)                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â± GOING LIVE                          â”Œâ”€â”€â”€â” â”‚   â”‚
â”‚  â”‚   Jan 30, 2026                        â”‚ 7 â”‚ â”‚ â—„â”€â”€â”€ Hover here
â”‚  â”‚                                       â”‚daysâ”‚ â”‚   â”‚
â”‚  â”‚                                       â””â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚ Days until listing goes live on MLS     â”‚ â—„â”€â”€â”€ Tooltip appears
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                     â”‚
â”‚  ğŸ‘¤ DCC  Daryl                                      â”‚
â”‚  [Marketing] [Docs] [Slack]                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Verification Checklist

- [ ] Off Market: Hover on "7 days" shows "Days until listing goes live on MLS"
- [ ] Off Market (past): Hover shows "Days since expected go-live date"
- [ ] Active Listing: Hover on "29 days" shows "Days on market since listing"
- [ ] In Contract: Hover on "4 days remaining" shows "Days until expected closing"
- [ ] Pending: Hover on "X days remaining" shows "Days until expected closing"
- [ ] Pending (overdue): Hover on "2 days overdue" shows "Days past expected closing date"
- [ ] Closed: Hover on "46 days ago" shows "Days since transaction closed"
- [ ] Tooltip appears on left side of the number (doesn't overflow card)
- [ ] Tooltip has arrow pointing to the content
- [ ] Cursor changes to `cursor-help` when hovering on countdown
- [ ] Tooltip disappears when mouse leaves

---

## Files to Create/Modify

1. **`client/src/components/ui/SimpleTooltip.tsx`** - Create new tooltip component
2. **`client/src/components/transactions/TransactionCard.tsx`** - Add SimpleTooltip imports and wrap countdown elements