Enhance Stats Summary Row with Range and Median Values
Task
Update the stats summary row to include Range and Median sub-values beneath each main stat, matching the design in the attached screenshot.
Current State (Screenshot 1)
LOW PRICE    HIGH PRICE    AVG PRICE      MEDIAN        AVG $/SQFT    AVG DOM
$749,000     $2,199,000    $1,353,780     $1,299,000    $394          0 Days
Desired State (Screenshot 2 style applied to current layout)
LOW PRICE         HIGH PRICE        AVG PRICE          MEDIAN           AVG $/SQFT        AVG DOM
$749,000          $2,199,000        $1,353,780         $1,299,000       $394              0 Days
                                    Range: $749,000-   Range: N/A       Range: $227-      Range: 0-0
                                    $2,199,000                          $674              Median: 0
                                    Median: $1,299,000                  Median: $367
Implementation
typescriptconst StatsSummaryRow = ({ comparables }) => {
  const stats = useMemo(() => {
    const prices = comparables.map(c => c.soldPrice || c.listPrice).filter(Boolean);
    const pricesPerSqft = comparables
      .filter(c => c.sqft > 0)
      .map(c => (c.soldPrice || c.listPrice) / c.sqft);
    const doms = comparables.map(c => c.dom).filter(d => d !== null && d !== undefined);
    
    const sortedPrices = [...prices].sort((a, b) => a - b);
    const sortedPsf = [...pricesPerSqft].sort((a, b) => a - b);
    const sortedDom = [...doms].sort((a, b) => a - b);
    
    const getMedian = (arr: number[]) => {
      if (arr.length === 0) return 0;
      const mid = Math.floor(arr.length / 2);
      return arr.length % 2 !== 0 ? arr[mid] : (arr[mid - 1] + arr[mid]) / 2;
    };
    
    return {
      lowPrice: prices.length > 0 ? Math.min(...prices) : 0,
      highPrice: prices.length > 0 ? Math.max(...prices) : 0,
      avgPrice: prices.length > 0 ? prices.reduce((a, b) => a + b, 0) / prices.length : 0,
      medianPrice: getMedian(sortedPrices),
      
      avgPricePerSqft: pricesPerSqft.length > 0 
        ? Math.round(pricesPerSqft.reduce((a, b) => a + b, 0) / pricesPerSqft.length) 
        : 0,
      minPricePerSqft: pricesPerSqft.length > 0 ? Math.min(...pricesPerSqft) : 0,
      maxPricePerSqft: pricesPerSqft.length > 0 ? Math.max(...pricesPerSqft) : 0,
      medianPricePerSqft: Math.round(getMedian(sortedPsf)),
      
      avgDom: doms.length > 0 ? Math.round(doms.reduce((a, b) => a + b, 0) / doms.length) : 0,
      minDom: doms.length > 0 ? Math.min(...doms) : 0,
      maxDom: doms.length > 0 ? Math.max(...doms) : 0,
      medianDom: Math.round(getMedian(sortedDom)),
    };
  }, [comparables]);

  return (
    <div className="grid grid-cols-6 gap-4 bg-[#2a2a2a] p-4 text-white">
      {/* LOW PRICE */}
      <div>
        <div className="text-xs text-gray-400 uppercase tracking-wide">Low Price</div>
        <div className="text-xl font-bold">${stats.lowPrice.toLocaleString()}</div>
      </div>
      
      {/* HIGH PRICE */}
      <div>
        <div className="text-xs text-gray-400 uppercase tracking-wide">High Price</div>
        <div className="text-xl font-bold">${stats.highPrice.toLocaleString()}</div>
      </div>
      
      {/* AVG PRICE - with Range and Median */}
      <div>
        <div className="text-xs text-gray-400 uppercase tracking-wide">Avg Price</div>
        <div className="text-xl font-bold">${Math.round(stats.avgPrice).toLocaleString()}</div>
        <div className="text-xs text-gray-400 mt-1">
          Range: ${stats.lowPrice.toLocaleString()} - ${stats.highPrice.toLocaleString()}
        </div>
        <div className="text-xs text-gray-400">
          Median: ${stats.medianPrice.toLocaleString()}
        </div>
      </div>
      
      {/* MEDIAN */}
      <div>
        <div className="text-xs text-gray-400 uppercase tracking-wide">Median</div>
        <div className="text-xl font-bold">${stats.medianPrice.toLocaleString()}</div>
      </div>
      
      {/* AVG $/SQFT - with Range and Median */}
      <div>
        <div className="text-xs text-gray-400 uppercase tracking-wide">Avg $/Sqft</div>
        <div className="text-xl font-bold">${stats.avgPricePerSqft}</div>
        <div className="text-xs text-gray-400 mt-1">
          Range: ${Math.round(stats.minPricePerSqft)} - ${Math.round(stats.maxPricePerSqft)}
        </div>
        <div className="text-xs text-gray-400">
          Median: ${stats.medianPricePerSqft}
        </div>
      </div>
      
      {/* AVG DOM - with Range and Median */}
      <div>
        <div className="text-xs text-gray-400 uppercase tracking-wide">Avg DOM</div>
        <div className="text-xl font-bold">{stats.avgDom} Days</div>
        <div className="text-xs text-gray-400 mt-1">
          Range: {stats.minDom} - {stats.maxDom}
        </div>
        <div className="text-xs text-gray-400">
          Median: {stats.medianDom}
        </div>
      </div>
    </div>
  );
};
```

### Acceptance Criteria

- [ ] Stats summary row keeps existing labels: Low Price, High Price, Avg Price, Median, Avg $/Sqft, Avg DOM
- [ ] Avg Price shows Range and Median sub-values
- [ ] Avg $/Sqft shows Range and Median sub-values
- [ ] Avg DOM shows Range and Median sub-values
- [ ] Sub-values appear in smaller gray text below main values
- [ ] Dark background (#2a2a2a) maintained

---

## Prompt 2: Clarify "vs Market" Indicator Source

### Question for Replit

I see a "vs market" indicator with red/green arrows in the CMA section (Screenshot 3):
```
↗ 77.0% vs market          ↗ 78.3% vs market
Your: $1,850,000           Your: $717
```

**Please clarify:**

1. Where is this "vs market" indicator currently displayed in the app? (Which component/tab?)
2. What data source is used for the "market" comparison? Is it:
   - Average of all comparables in the CMA?
   - A separate market data API?
   - Something from the Overview tab or Market Analysis section?
3. How is the percentage calculated?
4. What determines if the arrow is red (↗) vs green?

**Goal:** I want to add this same "vs market" indicator to the CMA stats view, but need to understand the data source and calculation first.

**Please respond with:**
- The file/component where this indicator exists
- The calculation logic
- The data source being used

---

## Combined Prompt (If you want both in one)

### Task

1. **Enhance stats summary row** with Range and Median sub-values (see implementation above)

2. **Investigate and document** the "vs market" indicator shown in Screenshot 3:
   - Find where this indicator is implemented in the codebase
   - Document the calculation logic
   - Identify the data source for "market" baseline
   - Report back before implementing so we can align with existing logic

### Expected Response

After investigating, please report:
```
VS MARKET INDICATOR FOUND:
- Location: [file path and component name]
- Calculation: [formula used]
- Data Source: [where market baseline comes from]
- Color Logic: [when red vs green]