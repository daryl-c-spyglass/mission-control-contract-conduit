# Add Agent Profile Photo to CMA Presentation Builder Cover Page

## Current State vs Desired State

### Current (Screenshot 1 & 2)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Cover Page                 â”‚
â”‚                                         â”‚
â”‚          Spyglass Realty                â”‚  â† Orange text
â”‚                                         â”‚
â”‚   Comparative Market Analysis           â”‚  â† Bold title
â”‚                                         â”‚
â”‚      Prepared exclusively for you       â”‚
â”‚            1/22/2026                    â”‚
â”‚                                         â”‚
â”‚         Daryl Camingao                  â”‚  â† Name only (no photo)
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Desired (Like Client Data Portal - Screenshot 3)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Cover Page                 â”‚
â”‚                                         â”‚
â”‚          Spyglass Realty                â”‚  â† Orange text
â”‚                                         â”‚
â”‚   Comparative Market Analysis           â”‚  â† Bold title
â”‚                                         â”‚
â”‚      Prepared exclusively for you       â”‚
â”‚                                         â”‚
â”‚           [Client Name]                 â”‚  â† Optional: Recipient name
â”‚                                         â”‚
â”‚            1/22/2026                    â”‚
â”‚                                         â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚            â”‚  ğŸ‘¤   â”‚                    â”‚  â† Agent profile photo
â”‚            â”‚ Photo â”‚                    â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚         Daryl Camingao                  â”‚  â† Agent name
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Implementation

### 1. Get Agent Profile Photo from Settings/User

The profile photo should come from the user's settings (same source as Graphics Settings):

```tsx
// Fetch user settings which includes headshot
const { data: userSettings } = useQuery({
  queryKey: ['/api/user/settings'],
});

// Or from the current user context
const { user } = useAuth();

const agentPhoto = userSettings?.headshot || user?.profilePhoto;
const agentName = userSettings?.name || user?.name || 'Agent Name';
```

### 2. Update Cover Page Component

```tsx
// In the Cover Page preview/render component

interface CoverPageProps {
  title?: string;
  subtitle?: string;
  preparedFor?: string;  // Optional recipient name
  date: string;
  agentName: string;
  agentPhoto?: string;   // NEW: Agent headshot URL
}

function CoverPagePreview({ 
  title = "Comparative Market Analysis",
  subtitle = "Prepared exclusively for you",
  preparedFor,
  date,
  agentName,
  agentPhoto 
}: CoverPageProps) {
  return (
    <div className="p-8 text-center space-y-4">
      {/* Company Name */}
      <h2 className="text-orange-500 text-xl font-medium">
        Spyglass Realty
      </h2>
      
      {/* Title */}
      <h1 className="text-2xl font-bold text-foreground">
        {title}
      </h1>
      
      {/* Subtitle */}
      <p className="text-muted-foreground">
        {subtitle}
      </p>
      
      {/* Prepared For (Optional) */}
      {preparedFor && (
        <p className="text-lg font-medium text-foreground">
          {preparedFor}
        </p>
      )}
      
      {/* Date */}
      <p className="text-muted-foreground">
        {date}
      </p>
      
      {/* Agent Photo + Name */}
      <div className="flex flex-col items-center gap-2 pt-4">
        {agentPhoto ? (
          <img 
            src={agentPhoto} 
            alt={agentName}
            className="w-16 h-16 rounded-full object-cover border-2 border-border"
          />
        ) : (
          <div className="w-16 h-16 rounded-full bg-muted flex items-center justify-center">
            <User className="w-8 h-8 text-muted-foreground" />
          </div>
        )}
        <p className="font-medium text-foreground">
          {agentName}
        </p>
      </div>
    </div>
  );
}
```

### 3. Update Content Tab (if editable)

If the Cover Page has editable fields in the Content tab, add "Prepared For" field:

```tsx
// In Content tab for Cover Page section
<div className="space-y-4">
  <div>
    <Label>Title</Label>
    <Input 
      value={coverPageData.title}
      onChange={(e) => updateCoverPage({ title: e.target.value })}
      placeholder="Comparative Market Analysis"
    />
  </div>
  
  <div>
    <Label>Subtitle</Label>
    <Input 
      value={coverPageData.subtitle}
      onChange={(e) => updateCoverPage({ subtitle: e.target.value })}
      placeholder="Prepared exclusively for you"
    />
  </div>
  
  {/* NEW: Prepared For field */}
  <div>
    <Label>Prepared For (Client Name)</Label>
    <Input 
      value={coverPageData.preparedFor}
      onChange={(e) => updateCoverPage({ preparedFor: e.target.value })}
      placeholder="e.g., John & Jane Smith"
    />
    <p className="text-xs text-muted-foreground mt-1">
      Optional: Enter the client's name
    </p>
  </div>
  
  {/* Agent info is auto-filled from settings */}
  <div className="pt-4 border-t">
    <Label>Agent Information</Label>
    <div className="flex items-center gap-3 mt-2 p-3 bg-muted/50 rounded-lg">
      {agentPhoto ? (
        <img src={agentPhoto} className="w-12 h-12 rounded-full object-cover" />
      ) : (
        <div className="w-12 h-12 rounded-full bg-muted flex items-center justify-center">
          <User className="w-6 h-6" />
        </div>
      )}
      <div>
        <p className="font-medium">{agentName}</p>
        <p className="text-xs text-muted-foreground">
          From your profile settings
        </p>
      </div>
    </div>
    <p className="text-xs text-muted-foreground mt-2">
      â„¹ï¸ Update your photo in Settings â†’ Graphics Settings
    </p>
  </div>
</div>
```

---

## Visual Comparison

### Live Preview Card (With Photo)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘ï¸ Live Preview                           7 sections    â†—ï¸  â”‚
â”‚    Preview how your CMA will appear                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ ğŸ“„ Cover Page                                           â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚              Spyglass Realty                            â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚       Comparative Market Analysis                       â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚         Prepared exclusively for you                    â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚               The Smith Family                          â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚                 1/22/2026                               â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”                               â”‚â”‚
â”‚ â”‚                 â”‚  ğŸ§‘   â”‚                               â”‚â”‚
â”‚ â”‚                 â”‚ Photo â”‚                               â”‚â”‚
â”‚ â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚â”‚
â”‚ â”‚              Daryl Camingao                             â”‚â”‚
â”‚ â”‚                                                         â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚ â”‚ âœ‰ï¸ Cover Letter                                         â”‚â”‚
â”‚ â”‚ Your personalized cover letter will appear here...      â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Expanded Preview Modal (With Photo)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CMA Presentation Preview                    17 sections enabled â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ ğŸ“„ Cover Page                                             â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚                    Spyglass Realty                        â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚            Comparative Market Analysis                    â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚              Prepared exclusively for you                 â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚                   The Smith Family                        â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚                      1/22/2026                            â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”                            â”‚ â”‚
â”‚  â”‚                      â”‚  ğŸ§‘   â”‚                            â”‚ â”‚
â”‚  â”‚                      â”‚ Photo â”‚                            â”‚ â”‚
â”‚  â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚ â”‚
â”‚  â”‚                   Daryl Camingao                          â”‚ â”‚
â”‚  â”‚                                                           â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ âœ‰ï¸ Cover Letter                                           â”‚ â”‚
â”‚  â”‚ ...                                                       â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow

```
Settings (Graphics Settings)
    â”‚
    â”œâ”€â”€ headshot (photo URL)
    â”œâ”€â”€ name
    â”œâ”€â”€ phone
    â””â”€â”€ email
           â”‚
           â–¼
Presentation Builder
    â”‚
    â”œâ”€â”€ Cover Page Component
    â”‚       â”œâ”€â”€ Uses: agentPhoto, agentName
    â”‚       â””â”€â”€ Plus: preparedFor (user input)
    â”‚
    â””â”€â”€ PDF Export
            â””â”€â”€ Includes agent photo in Cover Page
```

---

## Files to Modify

1. **Cover Page preview component** - Add photo display
2. **Content tab** - Add "Prepared For" input field
3. **PDF export template** - Include photo in generated PDF
4. **Fetch user settings** - Get headshot URL

---

## Verification Checklist

- [ ] Agent photo displays on Cover Page in Live Preview
- [ ] Agent photo displays in expanded Preview modal
- [ ] Photo falls back to placeholder if not set
- [ ] "Prepared For" field is optional and editable
- [ ] Photo syncs from Settings (same as Create Flyer)
- [ ] Photo included in exported PDF
- [ ] Works in both light and dark mode